# 🏆 成就徽章系统 — 设计文档 v1

> 版本：v1.0 | 日期：2026-02-14
> 所属系统：全局系统（跨番茄时钟/瓜棚/农场）
> 关联文档：[系统总览](OVERVIEW-v2.md) · [逐步解锁](UNLOCK-DESIGN-v1.md)

## 定位

成就系统是西瓜时钟的**长期目标引擎**。给用户一个持续追求的理由，让每一分钟专注都在"投资"。

核心原则：
- **可达但有挑战** — 不能太容易（没成就感），也不能遥不可及（放弃）
- **惊喜感** — 隐藏成就让用户有探索欲和分享欲
- **有价值** — 部分成就解锁实际奖励（主题/音效/庆祝动画），不只是看着好看

---

## 一、徽章系列总览

| 系列 | 主色调 | 图标风格 | 数量 | 驱动目标 |
|------|--------|---------|------|---------|
| 🔥 专注 | 西瓜红 #FF3B5C | 火焰/时钟元素 | 10 | 核心行为激励 |
| 📅 坚持 | 暖橙 #FF8C42 | 日历/链条元素 | 8 | 留存驱动 |
| 🍉 收获 | 西瓜绿 #4CAF50 | 西瓜/植物元素 | 7 | 收集驱动 |
| 🎯 项目 | 海洋蓝 #2196F3 | 靶心/清单元素 | 4 | 项目模式使用 |
| 🌟 隐藏 | 金紫 #FFD700/#9C27B0 | 神秘/星星元素 | 5 | 惊喜感+口碑传播 |
| **合计** | | | **34** | |

---

## 二、完整成就清单

### 🔥 专注系列（10个）

| # | 名称 | 英文名 | 解锁条件 | 描述文案（中文） | 奖励 |
|---|------|--------|---------|----------------|------|
| F1 | 第一颗西瓜 | First Melon | 完成第 1 次专注 | 每一段旅程都从第一步开始 🌱 | — |
| F2 | 专注新手 | Focus Rookie | 累计专注 1 小时 | 一小时的专注，一小时的成长 | — |
| F3 | 专注达人 | Focus Pro | 累计专注 10 小时 | 十个小时，你的西瓜田已经初具规模 | — |
| F4 | 专注大师 | Focus Master | 累计专注 50 小时 | 五十小时的浇灌，荒漠变绿洲 | 解锁"大师"头衔 |
| F5 | 专注传奇 | Focus Legend | 累计专注 100 小时 | 一百小时，你已经是时间的朋友 | 解锁"传奇金框"徽章边框 |
| F6 | 时间领主 | Time Lord | 累计专注 500 小时 | 时间在你手中不再流逝，而是绽放 | 解锁"时间领主"专属主题 |
| F7 | 深度潜水 | Deep Dive | 单次专注 ≥45 分钟 | 你潜入了专注的深海 🐋 | — |
| F8 | 马拉松选手 | Marathon Runner | 单次专注 ≥90 分钟 | 九十分钟的极限专注，致敬你的意志力 | — |
| F9 | 日产十瓜 | Ten-a-Day | 一天完成 ≥10 次专注 | 今天的西瓜田大丰收！ | — |
| F10 | 效率怪兽 | Efficiency Beast | 一天累计专注 ≥5 小时 | 五小时！你今天是不是住在西瓜田里了？ | — |

### 📅 坚持系列（8个）

| # | 名称 | 英文名 | 解锁条件 | 描述文案（中文） | 奖励 |
|---|------|--------|---------|----------------|------|
| S1 | 三天打鱼 | Three-Day Streak | 连续打卡 3 天 | 好的开始是成功的一半 | — |
| S2 | 一周达人 | Week Warrior | 连续打卡 7 天 | 一整周！习惯正在生根发芽 🌿 | — |
| S3 | 半月坚持 | Fortnight Focus | 连续打卡 14 天 | 两周的坚持，西瓜田已经郁郁葱葱 | — |
| S4 | 钢铁意志 | Iron Will | 连续打卡 30 天 | 三十天，你证明了什么叫坚持 | 解锁"钢铁"徽章边框 |
| S5 | 百日传说 | Century Legend | 连续打卡 100 天 | 一百天不间断，你就是传说本身 | 解锁"百日"专属庆祝动画 |
| S6 | 周末战士 | Weekend Warrior | 周六和周日都完成了专注 | 别人在休息，你在成长 💪 | — |
| S7 | 早起鸟 | Early Bird | 早上 6:00-8:00 完成专注 | 清晨的西瓜田，露珠还在叶子上 🌅 | — |
| S8 | 夜猫子 | Night Owl | 晚上 22:00-00:00 完成专注 | 夜深了，你的西瓜还在安静地生长 🌙 | — |

### 🍉 收获系列（7个）

| # | 名称 | 英文名 | 解锁条件 | 描述文案（中文） | 奖励 |
|---|------|--------|---------|----------------|------|
| H1 | 初次收获 | First Harvest | 获得第 1 个收获物 | 你的第一颗种子发芽了！ | — |
| H2 | 满园春色 | Full Garden | 集齐 5 种普通收获物 | 小芽、幼苗、小花、小瓜、大西瓜——你全都有了 | — |
| H3 | 金瓜降临 | Golden Arrival | 获得第 1 个金西瓜 | 传说中的金西瓜！你是被选中的人 ✨ | 解锁"金色光环"庆祝特效 |
| H4 | 金瓜收藏家 | Golden Collector | 获得 5 个金西瓜 | 五颗金西瓜，你的运气和实力都在线 | — |
| H5 | 仓库大亨 | Warehouse Tycoon | 仓库总收获物 ≥100 | 你的瓜棚快装不下了！ | — |
| H6 | 合成初体验 | First Synthesis | 第 1 次合成 | 把小的变成大的，这就是合成的魔力 | — |
| H7 | 合成大师 | Synthesis Master | 累计合成 ≥50 次 | 五十次合成，你已经是瓜棚里的炼金术士 | — |

### 🎯 项目系列（4个）

| # | 名称 | 英文名 | 解锁条件 | 描述文案（中文） | 奖励 |
|---|------|--------|---------|----------------|------|
| P1 | 项目启动 | Project Launch | 完成第 1 个项目（所有子任务完成） | 从规划到完成，这就是项目的力量 | — |
| P2 | 精准预估 | Precision | 项目实际总时间与预估偏差 ≤10% | 你对时间的感知精准得可怕 🎯 | — |
| P3 | 项目达人 | Project Pro | 完成 10 个项目 | 十个项目，你已经是项目管理高手 | — |
| P4 | 超级多任务 | Super Multitask | 一个项目 ≥5 个子任务且全部完成 | 五个子任务一气呵成，效率拉满！ | — |

### 🌟 隐藏系列（5个）

> 隐藏成就不提前显示条件，解锁前在成就页显示为 "???" + 灰色问号图标

| # | 名称 | 英文名 | 解锁条件（用户不可见） | 描述文案（解锁后显示） | 奖励 |
|---|------|--------|---------------------|---------------------|------|
| X1 | 时间旅行者 | Time Traveler | 在凌晨 00:00:00 ±30秒 完成一个专注 | 你在时间的交界处种下了一颗西瓜 ⏰ | — |
| X2 | 情人节西瓜 | Valentine Melon | 在 2 月 14 日完成专注 | 今天的西瓜格外甜 💕 | — |
| X3 | 音效探索家 | Sound Explorer | 连续 7 天每天使用不同的背景音组合 | 你的耳朵比你的手更勤奋 🎧 | — |
| X4 | 完美主义者 | Perfectionist | 连续 5 次专注都完成（无一次放弃） | 五连完美，一个都不落下 | — |
| X5 | 西瓜元年 | Year One | 注册/首次使用满 365 天 | 一整年，你和西瓜时钟一起走过了四季 🎂 | 解锁"周年纪念"专属徽章边框 |

---

## 三、徽章视觉规范

### 基本形态
- **形状**：圆形，直径 64px（展示）/ 48px（列表）/ 32px（小图标）
- **未解锁**：灰色剪影 + 半透明 🔒 图标叠加，无颜色
- **已解锁**：系列主色调 + 图标 + 微光效果（subtle glow）
- **边框**：默认 2px 白色/深色描边；特殊奖励可解锁金框/钢铁框等

### 设计风格
- 与西瓜时钟整体一致：**卡通、圆润、可爱、有质感**
- 参考风格：Duolingo 成就徽章 / Apple Watch 活动奖章
- 每个徽章内有一个核心图形元素（不要塞太多东西）
- 颜色饱和度适中，在深色和浅色主题下都好看

### 系列色板
```
🔥 专注系列：#FF3B5C（西瓜红）→ #FF6B8A（浅红）
📅 坚持系列：#FF8C42（暖橙）→ #FFB74D（浅橙）
🍉 收获系列：#4CAF50（西瓜绿）→ #81C784（浅绿）
🎯 项目系列：#2196F3（海洋蓝）→ #64B5F6（浅蓝）
🌟 隐藏系列：#FFD700（金色）→ #9C27B0（紫色）渐变
```

### Charles 设计清单

需要设计的徽章图标共 34 个：

**🔥 专注系列（10个）：**
1. F1 第一颗西瓜 — 建议元素：一颗小西瓜 + 数字"1"
2. F2 专注新手 — 建议元素：时钟 + 1h 标记
3. F3 专注达人 — 建议元素：时钟 + 星星
4. F4 专注大师 — 建议元素：皇冠 + 时钟
5. F5 专注传奇 — 建议元素：金色时钟 + 光芒
6. F6 时间领主 — 建议元素：沙漏 + 西瓜藤蔓环绕
7. F7 深度潜水 — 建议元素：潜水面罩 + 气泡
8. F8 马拉松选手 — 建议元素：跑鞋 + 终点线
9. F9 日产十瓜 — 建议元素：一堆小西瓜 + 数字"10"
10. F10 效率怪兽 — 建议元素：闪电 + 西瓜

**📅 坚持系列（8个）：**
11. S1 三天打鱼 — 建议元素：3个连续的火焰
12. S2 一周达人 — 建议元素：日历 + 7天全勾
13. S3 半月坚持 — 建议元素：半月形 + 链条
14. S4 钢铁意志 — 建议元素：钢铁质感盾牌
15. S5 百日传说 — 建议元素：金色奖杯 + "100"
16. S6 周末战士 — 建议元素：剑 + 周六日标记
17. S7 早起鸟 — 建议元素：小鸟 + 日出
18. S8 夜猫子 — 建议元素：猫头鹰 + 月亮

**🍉 收获系列（7个）：**
19. H1 初次收获 — 建议元素：一颗发芽的种子
20. H2 满园春色 — 建议元素：5种收获物排列
21. H3 金瓜降临 — 建议元素：金西瓜 + 光芒
22. H4 金瓜收藏家 — 建议元素：5颗金西瓜
23. H5 仓库大亨 — 建议元素：满满的仓库/瓜棚
24. H6 合成初体验 — 建议元素：两个小的→一个大的箭头
25. H7 合成大师 — 建议元素：炼金瓶 + 西瓜

**🎯 项目系列（4个）：**
26. P1 项目启动 — 建议元素：火箭发射
27. P2 精准预估 — 建议元素：靶心正中
28. P3 项目达人 — 建议元素：清单全勾 + 星星
29. P4 超级多任务 — 建议元素：多层清单 + 闪电

**🌟 隐藏系列（5个）：**
30. X1 时间旅行者 — 建议元素：时空漩涡 + 时钟
31. X2 情人节西瓜 — 建议元素：心形西瓜
32. X3 音效探索家 — 建议元素：耳机 + 音符
33. X4 完美主义者 — 建议元素：钻石 + 5颗星
34. X5 西瓜元年 — 建议元素：生日蛋糕 + 西瓜蜡烛

---

## 四、成就页面 UI

### 入口
- 设置页用户头像下方，新增 **"🏆 成就"** 按钮
- 未登录用户也可使用（数据存 localStorage）
- 按钮右上角显示未查看的新解锁数量红点

### 成就页面布局

```
┌─────────────────────────────────┐
│  🏆 成就                    ← 返回 │
│                                   │
│  ┌─────────────────────────────┐ │
│  │  已解锁 8 / 34              │ │
│  │  ████████░░░░░░░░  23%      │ │
│  └─────────────────────────────┘ │
│                                   │
│  🔥 专注系列                      │
│  ┌──┐ ┌──┐ ┌──┐ ┌──┐ ┌──┐ ... │
│  │🍉│ │⏰│ │🔒│ │🔒│ │🔒│      │
│  └──┘ └──┘ └──┘ └──┘ └──┘      │
│  2 / 10                          │
│                                   │
│  📅 坚持系列                      │
│  ┌──┐ ┌──┐ ┌──┐ ┌──┐ ...      │
│  │🔥│ │📅│ │🔒│ │🔒│           │
│  └──┘ └──┘ └──┘ └──┘           │
│  2 / 8                           │
│                                   │
│  🍉 收获系列                      │
│  ...                              │
│                                   │
│  🌟 隐藏系列                      │
│  ┌──┐ ┌──┐ ┌──┐ ┌──┐ ┌──┐    │
│  │❓│ │❓│ │❓│ │❓│ │❓│       │
│  └──┘ └──┘ └──┘ └──┘ └──┘      │
│  ? / 5                           │
└─────────────────────────────────┘
```

### 徽章详情弹窗

点击任意徽章弹出详情：

**已解锁：**
```
┌─────────────────────┐
│      [徽章大图]       │
│    ✨ 专注传奇 ✨     │
│                       │
│  "一百小时，你已经    │
│   是时间的朋友"       │
│                       │
│  解锁条件：累计100h   │
│  解锁时间：2026-03-15 │
│                       │
│  🎁 已解锁：传奇金框  │
└─────────────────────┘
```

**未解锁：**
```
┌─────────────────────┐
│      [灰色剪影]       │
│      🔒 专注大师      │
│                       │
│  解锁条件：累计50h    │
│  当前进度：32h / 50h  │
│  ████████░░░░  64%   │
└─────────────────────┘
```

**隐藏未解锁：**
```
┌─────────────────────┐
│        [???]         │
│       🔒 ???         │
│                       │
│  "这是一个隐藏成就"   │
│  "继续探索吧..."     │
└─────────────────────┘
```

---

## 五、解锁庆祝效果

### 触发时机
专注完成后，系统检查是否有新成就解锁。如果有：
1. 先播放正常的西瓜庆祝动画
2. 庆祝动画结束后（或用户点击关闭后），弹出成就解锁弹窗

### 解锁弹窗设计

```
┌─────────────────────────┐
│                           │
│    🎉 成就解锁！          │
│                           │
│    [徽章从灰色→彩色动画]   │
│                           │
│    ✨ 一周达人 ✨          │
│    "一整周！习惯正在       │
│     生根发芽 🌿"          │
│                           │
│    [查看成就]  [继续]      │
└─────────────────────────┘
```

### 动画效果
- 徽章从灰色剪影渐变为彩色（0.8s）
- 解锁瞬间有一圈光波扩散（类似涟漪）
- 背景有淡淡的金色粒子飘落
- 整体时长 2s，点击任意位置可关闭
- 如果同时解锁多个成就，依次展示（每个间隔 0.5s）

### 有奖励的成就
解锁弹窗底部额外显示：
```
🎁 奖励已解锁：时间领主专属主题
[立即使用]
```

---

## 六、数据存储

### localStorage（未登录用户）
```json
{
  "achievements": {
    "unlocked": {
      "F1": "2026-02-14T07:30:00Z",
      "F2": "2026-02-15T10:00:00Z",
      "S1": "2026-02-16T18:00:00Z"
    },
    "progress": {
      "totalFocusMinutes": 3600,
      "maxStreak": 7,
      "currentStreak": 3,
      "totalSessions": 45,
      "totalProjects": 2,
      "totalSynthesis": 12,
      "goldenMelons": 1
    },
    "seen": ["F1", "F2", "S1"]
  }
}
```

### 云端同步（已登录用户）
- 新增 `achievements` 表或在 `user_settings` 中存储
- 与现有云同步机制一致：本地优先，异步推云端

---

## 七、成就检测逻辑

### 检测时机
- **专注完成时**：检查专注系列、坚持系列、收获系列、隐藏系列
- **合成完成时**：检查收获系列（H6/H7）
- **项目完成时**：检查项目系列
- **每日首次打开**：检查坚持系列（streak 相关）

### 性能考虑
- 成就检测是轻量计算（比较数字），不需要异步
- 在现有的 `handleTimerComplete` 回调末尾追加检测
- 只检查未解锁的成就，已解锁的跳过

---

## 八、未来扩展

### 预留的成就位
- 🏠 瓜棚系列（切瓜系统上线后）：第一次切瓜、切出稀有种子、切出全部道具……
- 🌱 农场系列（农场系统上线后）：第一次种植、第一次收获、集齐星系品种……
- 🌐 社交系列（社交功能上线后）：第一次分享、好友互访……

### 赛季成就（远期）
- 每月/每季度限定成就，过期不可再获得
- 制造稀缺感和紧迫感
